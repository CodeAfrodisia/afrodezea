const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/QuickViewModal-Nw3fXHAc.js","assets/index-Cfo4WONF.js","assets/index-BirdHXlw.css","assets/NotesRadar-CQK1XroP.js","assets/profileHeuristics-B2N-M0O0.js","assets/ratings-Bx631r91.js","assets/productsSupabase-fJvJppfC.js","assets/ProductDetail-BX8FUU_d.js"])))=>i.map(i=>d[i]);
import{_ as v,c as j,d as P,b as C,j as i,L as x}from"./index-Cfo4WONF.js";import{f as R}from"./productsSupabase-fJvJppfC.js";const D=600*1e3,p=new Map,u=new Map,_=e=>String(e||"").trim().toLowerCase();let b=!1;function F(){b||(b=!0,v(()=>import("./QuickViewModal-Nw3fXHAc.js"),__vite__mapDeps([0,1,2,3,4,5,6])).catch(()=>{}))}let y=!1;function L(){y||(y=!0,v(()=>import("./ProductDetail-BX8FUU_d.js"),__vite__mapDeps([7,1,2,6,4,5])).catch(()=>{}))}async function I(e){const t=_(e);if(!t)return null;const n=p.get(t);if(n&&Date.now()-n.t<D)return n.data;if(u.has(t))return u.get(t);const a=(async()=>{try{const r=await R(t);return r&&p.set(t,{data:r,t:Date.now()}),r||null}catch{return null}finally{u.delete(t)}})();return u.set(t,a),a}function w(e){return F(),I(e)}function M(e){const t=_(e),n=p.get(t);return n?n.data:null}function W(e,t={}){}function g(e,t="USD"){try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t}).format(Number(e))}catch{return`$${Number(e).toFixed(2)}`}}function N(e){const t=e?.variants?.nodes||[];if(t.length){const a=t.map(r=>Number(r?.price?.amount??0)).filter(Number.isFinite);if(a.length){const r=Math.min(...a),l=Math.max(...a);return{type:"range",min:r,max:l}}}const n=e?.priceRange?.minVariantPrice?.amount??(e?.price_cents!=null?e.price_cents/100:0);return{type:"single",value:Number(n)}}function T({product:e,onQuickView:t,fromSearch:n="",...a}){const{add:r}=j(),{ids:l=[],toggle:d}=P(),c=e.image_url?{url:e.image_url}:e.images?.nodes?.[0]||null,m=e.priceRange?.minVariantPrice||{amount:(e.price_cents??0)/100,currencyCode:"USD"},o=l.includes(e.id),k={id:e.id,title:e.title,handle:e.handle||e.slug||null,image_url:c?.url||null,price_cents:e.price_cents??Math.round(Number(m.amount||0)*100),priceRange:e.priceRange||null};C();const h=e.handle||e.slug,f=`/product/${h}`;return i.jsxs("div",{className:"card",style:{minWidth:0,boxSizing:"border-box",border:"1px solid #222",borderRadius:16,overflow:"hidden",background:"#121212",position:"relative"},onMouseEnter:()=>w(h),onFocus:()=>w(h),tabIndex:0,...a,children:[i.jsx("button",{"aria-label":o?"Remove from wishlist":"Add to wishlist","aria-pressed":o,onClick:()=>{d(e.id,k),e.id},style:{position:"absolute",top:10,right:10,width:36,height:36,borderRadius:999,border:"1px solid rgba(212,175,55,.35)",background:o?"linear-gradient(180deg,#f0d981,#D4AF37 55%, #b4932a)":"rgba(0,0,0,.35)",color:o?"#111":"#eee"},children:o?"♥":"♡"}),i.jsx("div",{style:{aspectRatio:"1 / 1",background:"#0a0a0a"},children:c&&i.jsx(x,{to:f,state:{from:{pathname:"/products",search:n}},children:i.jsx("img",{src:c.url,alt:e.title,loading:"lazy",decoding:"async",sizes:"(max-width: 720px) 50vw, (max-width: 1200px) 33vw, 25vw",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})})}),i.jsxs("div",{style:{padding:14},children:[i.jsx("div",{style:{fontWeight:700,lineHeight:1.3},children:i.jsx(x,{to:f,state:{from:{pathname:"/products",search:n}},style:{color:"#eee",textDecoration:"none"},children:e.title})}),i.jsx("div",{style:{opacity:.8,marginTop:6},children:(()=>{const s=N(e);return s.type==="range"&&s.min!==s.max?`${g(s.min)} – ${g(s.max)}`:g(s.type==="single"?s.value:e?.priceRange?.minVariantPrice?.amount??0)})()}),i.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[i.jsx("button",{style:{flex:1,padding:"10px 12px",borderRadius:10,border:"1px solid #333",background:"#1a1a1a",color:"#eee",fontWeight:700,cursor:"pointer"},onClick:()=>{t?.(e),e.id},children:"Quick View"}),i.jsx("button",{style:{flex:1,padding:"10px 12px",borderRadius:10,border:"1px solid #333",background:"#ffd75e",color:"#111",fontWeight:800,cursor:"pointer"},onClick:()=>{r({productId:e.id,title:e.title,variantId:`${e.id}:default`,variantTitle:"Default",image:c,price:m,qty:1}),e.id,Number(m.amount||0)},children:"Add to Cart"})]})]})]})}function E({products:e=[],onQuickView:t,fromSearch:n,columns:a=3,cardMin:r=300,gap:l=24}){return i.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${a}, minmax(${r}px, ${r}px))`,gap:l,rowGap:24,justifyContent:"center",padding:0,boxSizing:"border-box",maxWidth:"100%"},children:e.map(d=>i.jsx(T,{product:d,onQuickView:t,fromSearch:n},d.id))})}export{E as P,I as a,M as g,L as p,W as t};
