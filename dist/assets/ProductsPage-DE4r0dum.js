const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/QuickViewModal-BNhurZ01.js","assets/index-D3n6H1Cv.js","assets/index-CPw1xV8w.css","assets/NotesRadar-DJkeaLSL.js","assets/profileHeuristics-B2N-M0O0.js"])))=>i.map(i=>d[i]);
import{R as e,r as o,u as re,H as se,_ as oe}from"./index-D3n6H1Cv.js";import{s as ie}from"./productsSupabase-Dmcm6j9L.js";import{t as W,P as ce}from"./ProductsGrid-LUEFzvOo.js";function me({tabs:r,active:i,onChange:m}){return e.createElement("div",{style:{display:"flex",flexDirection:"column",gap:8}},r.map(a=>{const u=a.key===i;return e.createElement("button",{key:a.key,onClick:()=>m(a.key),style:{padding:"10px 14px",textAlign:"left",borderRadius:10,border:`1px solid ${u?"#6a5":"#333"}`,background:u?"#1a1f16":"#121212",color:"#eee",cursor:"pointer"}},a.label)}))}function ue({query:r,onQueryChange:i,selectedTags:m,onToggleTag:a,minPrice:u,maxPrice:v,onPriceChange:w,order:N,onOrderChange:M,tagsCatalog:S}){const _=o.useMemo(()=>S&&S.length?S:["floral","fruity","citrus","fresh","woody","spicy","sweet","smoky"],[S]),T=Array.isArray(m)&&typeof a=="function",C=typeof w=="function"&&(u===null||typeof u=="number")&&(v===null||typeof v=="number"),L=typeof M=="function"&&typeof N=="string";return e.createElement("div",{className:"surface",style:{padding:16,borderRadius:16,display:"grid",gap:12}},e.createElement("div",null,e.createElement("label",{htmlFor:"filter-search",style:{display:"block",marginBottom:8,color:"var(--text-muted)"}},"Search"),e.createElement("input",{id:"filter-search",className:"input",type:"search",value:r,placeholder:"Search candles…",onChange:l=>{i(l.target.value),W("search_change",{q:l.target.value})}})),T&&e.createElement("div",null,e.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8}},e.createElement("label",{style:{color:"var(--text-muted)"}},"Scent notes"),e.createElement("button",{type:"button",className:"btn btn--ghost",style:{padding:"2px 8px",fontSize:12},onClick:()=>m.forEach(l=>a(l)),"aria-label":"Clear selected tags",title:"Clear selected"},"Clear")),e.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap"}},_.map(l=>{const k=m.includes(l);return e.createElement("button",{key:l,type:"button",onClick:()=>{a(l)},className:`chip ${k?"active":""}`,"aria-pressed":k,style:{padding:"6px 10px",borderRadius:999,border:"1px solid var(--hairline)",background:k?"rgba(212,175,55,.12)":"transparent"}},l.charAt(0).toUpperCase()+l.slice(1))}))),C&&e.createElement("div",null,e.createElement("label",{style:{display:"block",marginBottom:8,color:"var(--text-muted)"}},"Price range ($)"),e.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},e.createElement(K,{placeholder:"Min",value:u??"",onChange:l=>{w(l===""?null:D(l),v)}}),e.createElement("span",{style:{opacity:.6}},"—"),e.createElement(K,{placeholder:"Max",value:v??"",onChange:l=>{w(u,l===""?null:D(l))}}))),L&&e.createElement("div",null,e.createElement("label",{htmlFor:"filter-order",style:{display:"block",marginBottom:8,color:"var(--text-muted)"}},"Sort by"),e.createElement("select",{id:"filter-order",className:"input",value:N,onChange:l=>{M(l.target.value),W("sort_change",{order:l.target.value})}},e.createElement("option",{value:"new"},"Newest"),e.createElement("option",{value:"price_asc"},"Price: Low → High"),e.createElement("option",{value:"price_desc"},"Price: High → Low"))))}function D(r){const i=Number(r);return Number.isFinite(i)?i:0}function K({value:r,onChange:i,placeholder:m}){return e.createElement("input",{className:"input",inputMode:"numeric",pattern:"[0-9]*",placeholder:m,style:{width:100},value:r,onChange:a=>i(a.target.value.replace(/[^\d.]/g,""))})}const X=e.lazy(()=>oe(()=>import("./QuickViewModal-BNhurZ01.js"),__vite__mapDeps([0,1,2,3,4]))),pe=[{key:"all",label:"All Collections"},{key:"affirmation",label:"Affirmation"},{key:"afrodisia",label:"Afrodisia"},{key:"pantheon",label:"Pantheon"},{key:"fall",label:"Fall"},{key:"winter",label:"Winter"}],Y="https://afrodezea.com",Z=r=>r?r.split(",").map(i=>i.trim()).filter(Boolean):[],de=r=>r&&r.length?r.join(","):"";function Ee(){const r="Luxury Candles | Afrodezea",i="Explore premium candles with rich scent profiles. Filter by notes and intensity.",m=`${Y}/products`,[a,u]=re(),v=(a.get("collection")||"all").toLowerCase(),w=a.get("q")||"",N=Z(a.get("tags")).map(t=>t.toLowerCase()),M=a.get("min")?Number(a.get("min")):null,S=a.get("max")?Number(a.get("max")):null,_=a.get("order")||"new",T=a.get("page")?Math.max(1,Number(a.get("page"))):1,[C,L]=o.useState(!0),[l,k]=o.useState([]),[A,q]=o.useState(0),[p,I]=o.useState(v),[y,R]=o.useState(w),[h,j]=o.useState(N),[g,F]=o.useState(M),[f,Q]=o.useState(S),[E,B]=o.useState(_),[s,b]=o.useState(T),[z,O]=o.useState(!1),[H,ee]=o.useState(null),U=24;o.useEffect(()=>{let t=!0;L(!0);const n=setTimeout(async()=>{try{const d=[y,p!=="all"?p:""].filter(Boolean).join(" "),{rows:c,total:P}=await ie({q:d,tags:h,minPriceCents:typeof g=="number"?g:void 0,maxPriceCents:typeof f=="number"?f:void 0,order:E,page:s,pageSize:U});t&&(k(c),q(P))}catch(d){console.error("[products] search failed",d),t&&(k([]),q(0))}finally{t&&L(!1)}},220);return()=>{t=!1,clearTimeout(n)}},[y,p,h.join("|"),g,f,E,s]),o.useEffect(()=>{const t=setTimeout(()=>{const n=new URLSearchParams(a);p&&p!=="all"?n.set("collection",p):n.delete("collection"),y.trim()?n.set("q",y.trim()):n.delete("q"),h.length?n.set("tags",de(h)):n.delete("tags"),g!=null?n.set("min",String(g)):n.delete("min"),f!=null?n.set("max",String(f)):n.delete("max"),E&&E!=="new"?n.set("order",E):n.delete("order"),s&&s!==1?n.set("page",String(s)):n.delete("page"),n.toString()!==a.toString()&&u(n,{replace:!1})},150);return()=>clearTimeout(t)},[p,y,h,g,f,E,s,a,u]),o.useEffect(()=>{const t=(a.get("collection")||"all").toLowerCase(),n=a.get("q")||"",d=Z(a.get("tags")).map(x=>x.toLowerCase()),c=a.get("min")?Number(a.get("min")):null,P=a.get("max")?Number(a.get("max")):null,G=a.get("order")||"new",J=a.get("page")?Math.max(1,Number(a.get("page"))):1;I(x=>x!==t?t:x),R(x=>x!==n?n:x),d.join("|")!==h.join("|")&&j(d),c!==g&&F(c),P!==f&&Q(P),G!==E&&B(G),J!==s&&b(J)},[a.toString()]);const te=t=>{const n=t.toLowerCase();j(d=>{const c=new Set(d);return c.has(n)?c.delete(n):c.add(n),s!==1&&b(1),Array.from(c)})},ne=(t,n)=>{F(t??null),Q(n??null),s!==1&&b(1)},ae=t=>{B(t),s!==1&&b(1)},V=t=>b(Math.max(1,t)),le=l,$=Math.max(1,Math.ceil(A/U));return e.createElement(e.Fragment,null,e.createElement(se,null,e.createElement("title",null,r),e.createElement("meta",{name:"description",content:i}),e.createElement("link",{rel:"canonical",href:m}),e.createElement("meta",{property:"og:type",content:"website"}),e.createElement("meta",{property:"og:title",content:r}),e.createElement("meta",{property:"og:description",content:i}),e.createElement("meta",{property:"og:url",content:m}),e.createElement("meta",{name:"twitter:card",content:"summary_large_image"})),!C&&l?.length>0&&e.createElement("script",{type:"application/ld+json"},JSON.stringify({"@context":"https://schema.org","@type":"ItemList",itemListElement:l.map((t,n)=>({"@type":"ListItem",position:n+1,url:`${Y}/p/${t.handle||t.slug}`,name:t.title}))})),!C&&l?.length>0&&e.createElement("script",{type:"application/ld+json"},JSON.stringify({"@context":"https://schema.org","@type":"ItemList",itemListElement:l.map((t,n)=>({"@type":"ListItem",position:n+1,url:`${window.location.origin}/product/${t.handle||t.slug}`,name:t.title}))})),e.createElement(e.Suspense,{fallback:null},e.createElement(X,{open:z,onClose:()=>O(!1),product:H})),e.createElement("div",{className:"container",style:{padding:24}},e.createElement("div",{style:{display:"grid",gridTemplateColumns:"280px 1fr",gap:24,alignItems:"start"}},e.createElement("aside",{style:{position:"sticky",top:84}},e.createElement("div",{className:"surface",style:{padding:12}},e.createElement(me,{tabs:pe,active:p,onChange:t=>{I(t),s!==1&&b(1)}})),e.createElement("div",{style:{height:12}}),e.createElement("div",{className:"surface",style:{padding:12}},e.createElement(ue,{query:y,onQueryChange:t=>{R(t),s!==1&&b(1)},selectedTags:h,onToggleTag:te,minPrice:g!=null?Math.round(g/100):null,maxPrice:f!=null?Math.round(f/100):null,onPriceChange:(t,n)=>{const d=t==null?null:Math.round(Number(t)*100),c=n==null?null:Math.round(Number(n)*100);ne(d,c)},order:E,onOrderChange:ae}))),e.createElement("main",null,e.createElement("div",{style:{marginBottom:12,opacity:.85}},C?"Loading…":`${A} result${A===1?"":"s"}`,y?` for “${y}”`:"",p!=="all"?` in ${p}`:""),C?e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:20}},Array.from({length:8}).map((t,n)=>e.createElement("div",{key:n,style:{height:320,borderRadius:16,background:"linear-gradient(90deg,#151515,#1a1a1a,#151515)",animation:"shimmer 1.2s linear infinite",backgroundSize:"300% 100%"}}))):e.createElement(e.Fragment,null,e.createElement(ce,{products:le,onQuickView:t=>{ee(t),O(!0)}}),$>1&&e.createElement("div",{style:{display:"flex",gap:8,justifyContent:"center",marginTop:16}},e.createElement("button",{className:"btn",disabled:s<=1,onClick:()=>V(s-1)},"Prev"),e.createElement("span",{style:{alignSelf:"center"}},s," / ",$),e.createElement("button",{className:"btn",disabled:s>=$,onClick:()=>V(s+1)},"Next")))))),e.createElement(X,{open:z,onClose:()=>O(!1),product:H}))}export{Ee as default};
