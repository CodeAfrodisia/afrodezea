import{r as i,j as d}from"./index-Cfo4WONF.js";const D=[{key:"floral",label:"Floral"},{key:"fruity",label:"Fruity"},{key:"citrus",label:"Citrus"},{key:"fresh",label:"Fresh"},{key:"woody",label:"Woody"},{key:"spicy",label:"Spicy"},{key:"sweet",label:"Sweet"},{key:"smoky",label:"Smoky"}];function w(u,r){return typeof window>"u"?r:getComputedStyle(document.documentElement).getPropertyValue(u)?.trim()||r}function L(){const u=document?.documentElement?.dataset?.theme||"cream";w("--brand-wine","#301727");const r=w("--brand-gold","rgb(212 175 55)");return u==="charcoal"||u==="velvet"?{axisText:"rgba(249,249,249,.92)",grid:"rgba(249,249,249,.20)",gridOuter:"rgba(249,249,249,.38)",stroke:r,dot:r,fill:`color-mix(in srgb, ${r} 22%, transparent)`}:{axisText:"rgba(42,28,28,.95)",grid:"rgba(42,28,28,.18)",gridOuter:"rgba(42,28,28,.36)",stroke:"rgba(42,28,28,.75)",dot:"rgba(42,28,28,.85)",fill:`color-mix(in srgb, ${w("--brand-wine","#301727")} 18%, transparent)`}}function G({profile:u={},compact:r=!1,chartScale:S=.9,max:p=5,levels:k=5,animate:v=!0}){const $=i.useRef(null),[W,A]=i.useState(0);i.useEffect(()=>{const e=$.current;if(!e)return;const t=new ResizeObserver(n=>{for(const s of n)A(Math.floor(s.contentRect.width))});return t.observe(e),()=>t.disconnect()},[]);const m=L(),o=Math.max(240,Math.min(460,W||(r?320:380))),I=r?12:16,B=Math.max(16,r?16:18),N=Math.max(12,Math.round(o*.046)),P=Math.max(12,Math.round(o*.07)),c=i.useMemo(()=>D,[]),R=i.useMemo(()=>{const e=t=>Math.max(0,Math.min(p,Number(t??0)));return c.map(t=>e(u[t.key]))},[u,c,p]),f=o/2,g=o/2,l=(o/2-I)*S,x=Math.PI*2/c.length,j=i.useMemo(()=>{const e=[];for(let t=1;t<=k;t++){const n=t/k,s=c.map((a,y)=>{const h=-Math.PI/2+y*x;return[f+Math.cos(h)*l*n,g+Math.sin(h)*l*n]});e.push(s)}return e},[c,l,x,k,f,g]),M=i.useMemo(()=>c.map((e,t)=>{const n=R[t],s=-Math.PI/2+t*x,a=Math.min(n,p)/p*l*1.002;return[f+Math.cos(s)*a,g+Math.sin(s)*a]}),[c,x,R,p,l,f,g]),[b,E]=i.useState(M);i.useEffect(()=>{if(!v){E(M);return}let e=0;const t=120,n=performance.now(),s=b,a=y=>{const h=Math.min(1,(y-n)/t),T=M.map(([q,C],F)=>{const[z,O]=s[F]||M[F];return[z+(q-z)*h,O+(C-O)*h]});E(T),h<1&&(e=requestAnimationFrame(a))};return e=requestAnimationFrame(a),()=>cancelAnimationFrame(e)},[M,v]);const _=i.useMemo(()=>b.map(([e,t])=>`${e},${t}`).join(" "),[b]);return d.jsxs("div",{className:"glass",style:{padding:12,borderRadius:16},ref:$,children:[d.jsx("div",{className:"heading",style:{fontSize:B,margin:"0 0 10px"},children:"Scent Profile"}),d.jsx("div",{style:{width:"100%",height:o},children:d.jsxs("svg",{width:o,height:o,viewBox:`0 0 ${o} ${o}`,role:"img","aria-label":"Scent profile radar",children:[j.map((e,t)=>d.jsx("polygon",{points:e.map(([n,s])=>`${n},${s}`).join(" "),fill:"none",stroke:t===j.length-1?m.gridOuter:m.grid,strokeWidth:t===j.length-1?1.5:1},`grid-${t}`)),c.map((e,t)=>{const n=-Math.PI/2+t*x,s=f+Math.cos(n)*l,a=g+Math.sin(n)*l;return d.jsx("line",{x1:f,y1:g,x2:s,y2:a,stroke:m.grid,strokeWidth:"1"},`axis-${t}`)}),d.jsx("polygon",{points:_,fill:m.fill,stroke:m.stroke,strokeWidth:1.5,strokeLinejoin:"round"}),b.map(([e,t],n)=>d.jsx("circle",{cx:e,cy:t,r:3.5,fill:m.dot},`dot-${n}`)),c.map((e,t)=>{const n=-Math.PI/2+t*x,s=f+Math.cos(n)*(l+P),a=g+Math.sin(n)*(l+P),y=Math.cos(n),h=y>.2?"start":y<-.2?"end":"middle";return d.jsx("text",{x:s,y:a,textAnchor:h,dominantBaseline:"middle",style:{fontSize:N,fill:m.axisText,fontWeight:600},children:e.label},`lab-${e.key}`)})]})})]})}export{G as default};
