import{c as h,d as b,R as t,L as d}from"./index-D3n6H1Cv.js";import{f}from"./productsSupabase-Dmcm6j9L.js";const s=new Map;async function c(e){const i=String(e||"").trim();if(!i)return null;if(s.has(i))return s.get(i);try{const a=await f(i);return a&&s.set(i,a),a}catch{return null}}function w(e,i={}){}function y({amount:e,currencyCode:i}){if(e==null)return"";try{return new Intl.NumberFormat(void 0,{style:"currency",currency:i||"USD"}).format(Number(e))}catch{return`$${Number(e).toFixed(2)}`}}function p({product:e,onQuickView:i}){const{add:a}=h(),{ids:m=[],toggle:u}=b(),r=e.image_url?{url:e.image_url}:e.images?.nodes?.[0]||null,l=e.priceRange?.minVariantPrice||{amount:(e.price_cents??0)/100,currencyCode:"USD"},n=m.includes(e.id),g={id:e.id,title:e.title,handle:e.handle||e.slug||null,image_url:r?.url||null,price_cents:e.price_cents??Math.round(Number(l.amount||0)*100),priceRange:e.priceRange||null},o=`/product/${e.handle||e.slug}`;return t.createElement("div",{className:"card",style:{border:"1px solid #222",borderRadius:16,overflow:"hidden",background:"#121212",position:"relative"},onMouseEnter:()=>c(e.handle||e.slug),onFocus:()=>c(e.handle||e.slug),tabIndex:0},t.createElement("button",{"aria-label":n?"Remove from wishlist":"Add to wishlist","aria-pressed":n,onClick:()=>{u(e.id,g),e.id,e.handle||e.slug},style:{position:"absolute",top:10,right:10,width:36,height:36,borderRadius:999,border:"1px solid rgba(212,175,55,.35)",background:n?"linear-gradient(180deg,#f0d981,#D4AF37 55%, #b4932a)":"rgba(0,0,0,.35)",color:n?"#111":"#eee"}},n?"♥":"♡"),t.createElement("div",{style:{aspectRatio:"1 / 1",background:"#0a0a0a"}},r&&t.createElement(d,{to:o},t.createElement("img",{src:r.url,alt:e.title,loading:"lazy",decoding:"async",sizes:"(max-width: 720px) 50vw, (max-width: 1200px) 33vw, 25vw",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}))),t.createElement("div",{style:{padding:14}},t.createElement("div",{style:{fontWeight:700,lineHeight:1.3}},t.createElement(d,{to:o,style:{color:"#eee",textDecoration:"none"}},e.title)),t.createElement("div",{style:{opacity:.8,marginTop:6}},y(l)),t.createElement("div",{style:{display:"flex",gap:8,marginTop:12}},t.createElement("button",{style:{flex:1,padding:"10px 12px",borderRadius:10,border:"1px solid #333",background:"#1a1a1a",color:"#eee",fontWeight:700,cursor:"pointer"},onClick:()=>{i?.(e),e.id}},"Quick View"),t.createElement("button",{style:{flex:1,padding:"10px 12px",borderRadius:10,border:"1px solid #333",background:"#ffd75e",color:"#111",fontWeight:800,cursor:"pointer"},onClick:()=>{a({productId:e.id,title:e.title,variantId:`${e.id}:default`,variantTitle:"Default",image:r,price:l,qty:1}),e.id,Number(l.amount||0)}},"Add to Cart"))))}function k({products:e=[],onQuickView:i}){return t.createElement("div",{className:"container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:24,rowGap:28}},e.map(a=>t.createElement(p,{key:a.id,product:a,onQuickView:i})))}export{k as P,w as t};
