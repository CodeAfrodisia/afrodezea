import{c as y,r,R as e}from"./index-D3n6H1Cv.js";import E from"./NotesRadar-DJkeaLSL.js";import{p as f}from"./profileHeuristics-B2N-M0O0.js";function g(a){if(!a)return"";try{return new Intl.NumberFormat(void 0,{style:"currency",currency:a.currencyCode||"USD"}).format(Number(a.amount??0))}catch{return`$${Number(a?.amount??0).toFixed(2)}`}}function h({open:a,onClose:i,product:t}){const{add:u}=y(),n=r.useMemo(()=>{if(!t)return[];const l=[];return t.image_url&&l.push({url:t.image_url}),t.images?.nodes?.length&&l.push(...t.images.nodes),l.length?l:[{url:""}]},[t]),[c,m]=r.useState(0);r.useEffect(()=>m(0),[t?.id]);const o=r.useMemo(()=>t?t.priceRange?.minVariantPrice||(t.price_cents!=null?{amount:t.price_cents/100,currencyCode:"USD"}:null):null,[t]),d=r.useMemo(()=>{const l=(t?.description||"").replace(/<[^>]+>/g," ");return f(l)},[t?.description]);return!a||!t?null:e.createElement(e.Fragment,null,e.createElement("div",{className:"modalOverlay",onClick:i}),e.createElement("div",{className:"modal"},e.createElement("div",{className:"modalInner"},e.createElement("div",{className:"glass-header"},e.createElement("div",{style:{display:"grid"}},e.createElement("div",{className:"modalTitle"},t.title),t.collection&&e.createElement("small",{style:{opacity:.7}},t.collection)),e.createElement("div",{style:{display:"flex",alignItems:"center",gap:12}},e.createElement("strong",{className:"modalPrice"},g(o)),e.createElement("button",{className:"btn btn--icon",onClick:i,"aria-label":"Close"},"✕"))),e.createElement("div",{className:"modalBody"},e.createElement("div",null,e.createElement("div",{className:"qv-hero"},n[c]?.url?e.createElement("img",{src:n[c].url,alt:t.title,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}}):null),n.length>1&&e.createElement("div",{className:"qv-thumbs"},n.map((l,s)=>e.createElement("button",{key:s,className:`qv-thumb ${s===c?"active":""}`,onClick:()=>m(s)},l.url?e.createElement("img",{src:l.url,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):null)))),e.createElement("div",{className:"modalInfo"},e.createElement("p",{style:{margin:0,opacity:.9}},t.description||"—"),e.createElement(E,{compact:!0,profile:d}),e.createElement("div",{style:{display:"flex",gap:10}},e.createElement("button",{className:"btn btn--gold",onClick:()=>u({productId:t.id,title:t.title,variantId:`${t.id}:default`,variantTitle:"Default",image:n[0]||null,price:o||{amount:0,currencyCode:"USD"},qty:1})},"Add to Cart"),e.createElement("button",{className:"btn btn--ghost",onClick:i},"Continue Browsing")))))))}export{h as default};
